<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Primary Meta Tags -->
  <title>Memory Test - Card Matching Game | Brain Training & Memory Skills</title>
  <meta name="title" content="Memory Test - Card Matching Game | Brain Training">
  <meta name="description" content="Free Memory Test Game! Test your memory skills with card matching. Multiple difficulty levels, track your records! Improve your brain power and memory capacity.">
  <meta name="keywords" content="memory test, memory game, card matching, brain training, memory skills, cognitive training, brain game, memory improvement, concentration game">
  <meta name="author" content="WithJoCoding">
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large">
  <link rel="canonical" href="https://withjocoding.pages.dev/memory-test.html">
  
  <!-- Language Alternatives -->
  <link rel="alternate" hreflang="en" href="https://withjocoding.pages.dev/memory-test.html?lang=en">
  <link rel="alternate" hreflang="ko" href="https://withjocoding.pages.dev/memory-test.html?lang=ko">
  <link rel="alternate" hreflang="x-default" href="https://withjocoding.pages.dev/memory-test.html">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://withjocoding.pages.dev/memory-test.html">
  <meta property="og:title" content="Memory Test - Card Matching Game">
  <meta property="og:description" content="Free Memory Test Game! Test your memory skills with card matching!">
  <meta property="og:image" content="https://withjocoding.pages.dev/og-memory.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="WithJoCoding Games">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://withjocoding.pages.dev/memory-test.html">
  <meta name="twitter:title" content="Memory Test - Brain Training">
  <meta name="twitter:description" content="Test your memory skills now!">
  <meta name="twitter:image" content="https://withjocoding.pages.dev/og-memory.jpg">
  
  <!-- Additional SEO -->
  <meta name="theme-color" content="#667eea">
  <link rel="preconnect" href="https://cdn.tailwindcss.com">
  <link rel="preconnect" href="https://pagead2.googlesyndication.com">
  
  <!-- Schema.org Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Memory Test",
    "description": "Free Memory Test Game! Test your memory skills with card matching. Multiple difficulty levels!",
    "url": "https://withjocoding.pages.dev/memory-test.html",
    "applicationCategory": "GameApplication",
    "operatingSystem": "Web Browser",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "author": {
      "@type": "Organization",
      "name": "WithJoCoding"
    }
  }
  </script>
  
  <!-- Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
  </script>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#667eea',
            secondary: '#764ba2',
          }
        }
      }
    }
  </script>

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1247545232353663"
     crossorigin="anonymous"></script>

  <style>
    .card {
      perspective: 1000px;
    }
    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }
    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .card-back {
      transform: rotateY(180deg);
    }
    .screen {
      display: none;
    }
    .screen.active {
      display: flex;
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-500 to-indigo-600">

  <!-- ì–¸ì–´ ì„ íƒ -->
  <div class="fixed top-4 right-4 z-50">
    <select id="language-selector" class="px-4 py-2 rounded-lg bg-white/90 backdrop-blur-sm shadow-lg border-2 border-white/50 cursor-pointer hover:bg-white transition-all">
      <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
      <option value="en">ğŸ‡ºğŸ‡¸ English</option>
      <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
      <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
      <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
      <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
      <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
      <option value="pt">ğŸ‡§ğŸ‡· PortuguÃªs</option>
      <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
      <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
    </select>
  </div>

  <!-- ì‹œì‘ í™”ë©´ -->
  <div id="start-screen" class="screen active min-h-screen flex flex-col items-center justify-center p-4 md:p-8">
    <div class="max-w-4xl w-full">

      <!-- ìƒë‹¨ ê´‘ê³  -->
      <div class="mb-6 flex justify-center">
        <ins class="adsbygoogle block"
             style="display:block; max-height:90px;"
             data-ad-format="horizontal"
             data-ad-client="ca-pub-1247545232353663"
             data-full-width-responsive="true"></ins>
      </div>

      <!-- ë©”ì¸ ì¹´ë“œ -->
      <div class="bg-white rounded-3xl shadow-2xl p-6 md:p-10">
        <h1 class="text-4xl md:text-6xl font-bold text-center text-blue-600 mb-4">
          ğŸ§  <span data-i18n="title">Memory Test</span>
        </h1>
        <p class="text-lg md:text-xl text-center text-gray-600 mb-8" data-i18n="subtitle">Match all cards in the shortest time!</p>

        <!-- ê²Œì„ ë°©ë²• -->
        <div class="bg-gray-50 rounded-2xl p-6 mb-8">
          <h3 class="text-xl font-bold text-blue-600 mb-4" data-i18n="gameMethod">How to Play</h3>
          <ol class="list-decimal list-inside space-y-2 text-gray-700">
            <li data-i18n="memoryMethodDesc.0">Click cards to flip and reveal emojis</li>
            <li data-i18n="memoryMethodDesc.1">Find matching pairs of emojis</li>
            <li data-i18n="memoryMethodDesc.2">Match all pairs in the shortest time to win!</li>
          </ol>
        </div>

        <!-- ë‚œì´ë„ ì„ íƒ -->
        <div class="mb-8">
          <h3 class="text-xl font-bold text-center mb-4" data-i18n="selectDifficulty">Select Difficulty</h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <button class="difficulty-btn border-2 border-gray-300 rounded-xl p-6 hover:border-blue-500 hover:shadow-lg transition-all duration-300 hover:-translate-y-1" data-difficulty="easy">
              <div class="text-4xl mb-2">ğŸŸ¢</div>
              <div class="font-bold text-lg mb-1" data-i18n="easy">Easy</div>
              <div class="text-sm text-gray-500">4x4 (8 pairs)</div>
            </button>
            <button class="difficulty-btn active border-2 border-blue-500 bg-gradient-to-br from-blue-500 to-purple-600 text-white rounded-xl p-6 shadow-lg" data-difficulty="normal">
              <div class="text-4xl mb-2">ğŸŸ¡</div>
              <div class="font-bold text-lg mb-1" data-i18n="normal">Normal</div>
              <div class="text-sm opacity-90">4x8 (16 pairs)</div>
            </button>
            <button class="difficulty-btn border-2 border-gray-300 rounded-xl p-6 hover:border-blue-500 hover:shadow-lg transition-all duration-300 hover:-translate-y-1" data-difficulty="hard">
              <div class="text-4xl mb-2">ğŸ”´</div>
              <div class="font-bold text-lg mb-1" data-i18n="hard">Hard</div>
              <div class="text-sm text-gray-500">8x8 (32 pairs)</div>
            </button>
          </div>
        </div>

        <!-- ì‹œì‘ ë²„íŠ¼ -->
        <button id="start-btn" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold text-xl md:text-2xl py-4 md:py-6 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all duration-300">
          <span data-i18n="startGame">Start Game</span>
        </button>

        <!-- ìµœê³  ê¸°ë¡ -->
        <div class="mt-6 text-center text-gray-600">
          <p>ğŸ† <span data-i18n="myBestRecord">My Best Record</span>: <span id="best-record" data-i18n="none">None</span></p>
        </div>

        <!-- ë‚´ ê¸°ë¡ TOP 10 -->
        <div class="mt-8">
          <h3 class="text-xl font-bold text-center mb-4">ğŸ“Š <span data-i18n="myRecordsTop10">My Top 10 Records</span></h3>
          <div id="history-list" class="bg-gray-50 rounded-2xl p-4 max-h-80 overflow-y-auto">
            <p class="text-center text-gray-500 py-8" data-i18n="noRecordsYet">No records yet. Start now!</p>
          </div>
        </div>

        <!-- ë‹¤ë¥¸ ê²Œì„ ì„¹ì…˜ -->
        <div class="mt-8 border-t border-gray-200 pt-8">
          <h3 class="text-xl font-bold text-center mb-4">ğŸ® <span data-i18n="otherGames">Other Games</span></h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <a href="index.html" class="block bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl p-6 text-white hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
              <div class="text-3xl mb-2">ğŸ¯</div>
              <div class="font-bold text-lg mb-2" data-i18n="fpsReactionTest">FPS Reaction Test</div>
              <div class="text-sm opacity-90" data-i18n="fpsReactionDesc">Test your reaction speed</div>
            </a>

            <a href="typing-speed.html" class="block bg-gradient-to-br from-green-500 to-teal-600 rounded-xl p-6 text-white hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
              <div class="text-3xl mb-2">âš¡</div>
              <div class="font-bold text-lg mb-2" data-i18n="typingSpeed">Typing Speed</div>
              <div class="text-sm opacity-90" data-i18n="typingSpeedDesc">Test your typing speed</div>
            </a>

            <a href="aim-trainer.html" class="block bg-gradient-to-br from-orange-500 to-red-600 rounded-xl p-6 text-white hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
              <div class="text-3xl mb-2">ğŸ¯</div>
              <div class="font-bold text-lg mb-2" data-i18n="aimTrainer">Aim Trainer</div>
              <div class="text-sm opacity-90" data-i18n="aimTrainerDesc">Improve your aim precision</div>
            </a>

            <a href="math-challenge.html" class="block bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl p-6 text-white hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
              <div class="text-3xl mb-2">ğŸ§®</div>
              <div class="font-bold text-lg mb-2" data-i18n="mathChallenge">Math Challenge</div>
              <div class="text-sm opacity-90" data-i18n="mathChallengeDesc">Quick math calculations</div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ê²Œì„ í™”ë©´ -->
  <div id="game-screen" class="screen hidden min-h-screen flex flex-col items-center justify-center p-4">
    <!-- ê²Œì„ ì •ë³´ -->
    <div class="mb-4 flex gap-4 bg-white/90 backdrop-blur-md px-6 py-3 rounded-full shadow-lg">
      <div class="text-gray-700 font-bold">
        â±ï¸ <span id="time-display">0:00</span>
      </div>
      <div class="text-gray-700 font-bold">
        ğŸ”„ <span id="moves-display">0</span> <span data-i18n="moves">moves</span>
      </div>
    </div>

    <!-- ì¹´ë“œ ê·¸ë¦¬ë“œ -->
    <div id="card-grid" class="grid gap-3 mb-4"></div>
  </div>

  <!-- ê²°ê³¼ í™”ë©´ -->
  <div id="result-screen" class="screen hidden min-h-screen flex flex-col items-center justify-center p-4">
    <div class="max-w-2xl w-full bg-white rounded-3xl shadow-2xl p-6 md:p-10">
      <h1 class="text-4xl font-bold text-center text-blue-600 mb-8">
        ğŸ‰ <span data-i18n="complete">Complete!</span>
      </h1>

      <div class="bg-gradient-to-br from-blue-500 to-purple-600 text-white rounded-2xl p-8 mb-6">
        <div class="text-center">
          <div class="text-lg opacity-90 mb-2" data-i18n="yourTime">Your Time</div>
          <div id="final-time" class="text-5xl font-bold mb-4">0:00</div>
          <div id="final-moves" class="text-xl">0 moves</div>
        </div>
      </div>

      <div class="flex gap-4 mb-6">
        <button id="retry-btn" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold text-xl py-4 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all">
          <span data-i18n="playAgain">Play Again</span>
        </button>
        <button id="home-btn" class="flex-1 bg-white text-blue-600 border-2 border-blue-600 font-bold text-xl py-4 rounded-full hover:bg-blue-600 hover:text-white transition-all">
          <span data-i18n="backHome">Home</span>
        </button>
      </div>
    </div>

    <!-- í•˜ë‹¨ ê´‘ê³  -->
    <div class="mt-6 flex justify-center">
      <ins class="adsbygoogle block"
           style="display:block; min-height:250px;"
           data-ad-format="autorelaxed"
           data-ad-client="ca-pub-1247545232353663"
           data-full-width-responsive="true"></ins>
    </div>
  </div>

  <!-- Schema.org êµ¬ì¡°í™” ë°ì´í„° -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Memory Test Game",
    "applicationCategory": "GameApplication",
    "description": "Free Memory Test Game. Match all cards and test your memory skills.",
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.8",
      "reviewCount": "1240"
    },
    "screenshot": "https://withjocoding.pages.dev/og-image.jpg",
    "featureList": [
      "Memory Test",
      "3 Difficulty Levels",
      "Top 10 Records",
      "SNS Sharing",
      "Free"
    ],
    "inLanguage": ["en", "ko", "ja", "zh", "es", "fr", "de", "pt", "ru", "ar"]
  }
  </script>

  <!-- Footer -->
  <footer class="w-full py-4 text-center text-gray-500 text-sm">
    <p class="mb-1">Made with â¤ï¸ | Memory Test</p>
    <p class="text-xs">
      <a href="privacy.html" class="text-gray-500 hover:text-gray-700 mx-2" data-i18n="privacyPolicy">Privacy Policy</a> |
      <a href="terms.html" class="text-gray-500 hover:text-gray-700 mx-2" data-i18n="termsOfService">Terms of Service</a>
    </p>
  </footer>

  <!-- AdSense ì´ˆê¸°í™” -->
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>

  <script>
    // ë²ˆì—­
    const translations = {
      ko: {
        title: 'ê¸°ì–µë ¥ í…ŒìŠ¤íŠ¸',
        subtitle: 'ëª¨ë“  ì¹´ë“œë¥¼ ìµœë‹¨ ì‹œê°„ì— ë§ì¶°ë³´ì„¸ìš”!',
        gameMethod: 'ê²Œì„ ë°©ë²•',
        memoryMethodDesc: {
          0: 'ì¹´ë“œë¥¼ í´ë¦­í•˜ì—¬ ì´ëª¨ì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”',
          1: 'ê°™ì€ ì´ëª¨ì§€ ìŒì„ ì°¾ìœ¼ì„¸ìš”',
          2: 'ëª¨ë“  ìŒì„ ìµœë‹¨ ì‹œê°„ì— ë§ì¶° ìŠ¹ë¦¬í•˜ì„¸ìš”!'
        },
        selectDifficulty: 'ë‚œì´ë„ ì„ íƒ',
        easy: 'ì‰¬ì›€',
        normal: 'ë³´í†µ',
        hard: 'ì–´ë ¤ì›€',
        startGame: 'ê²Œì„ ì‹œì‘',
        myBestRecord: 'ë‚´ ìµœê³  ê¸°ë¡',
        myRecordsTop10: 'ë‚´ ê¸°ë¡ TOP 10',
        noRecordsYet: 'ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤. ì§€ê¸ˆ ì‹œì‘í•˜ì„¸ìš”!',
        none: 'ì—†ìŒ',
        moves: 'ì´ë™',
        complete: 'ì™„ë£Œ!',
        yourTime: 'ì†Œìš” ì‹œê°„',
        playAgain: 'ë‹¤ì‹œ í•˜ê¸°',
        backHome: 'í™ˆìœ¼ë¡œ',
        otherGames: 'ë‹¤ë¥¸ ê²Œì„',
        fpsReactionTest: 'FPS ë°˜ì‘ í…ŒìŠ¤íŠ¸',
        fpsReactionDesc: 'ë°˜ì‘ ì†ë„ë¥¼ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”',
        typingSpeed: 'íƒ€ì´í•‘ ì†ë„',
        typingSpeedDesc: 'íƒ€ì´í•‘ ì†ë„ë¥¼ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”',
        aimTrainer: 'ì¡°ì¤€ íŠ¸ë ˆì´ë„ˆ',
        aimTrainerDesc: 'ì¡°ì¤€ ì •í™•ë„ë¥¼ í–¥ìƒì‹œí‚¤ì„¸ìš”',
        mathChallenge: 'ìˆ˜í•™ ì±Œë¦°ì§€',
        mathChallengeDesc: 'ë¹ ë¥¸ ê³„ì‚° ëŠ¥ë ¥ í…ŒìŠ¤íŠ¸',
        privacyPolicy: 'ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨',
        termsOfService: 'ì´ìš©ì•½ê´€'
      },
      en: {
        title: 'Memory Test',
        subtitle: 'Match all cards in the shortest time!',
        gameMethod: 'How to Play',
        memoryMethodDesc: {
          0: 'Click cards to flip and reveal emojis',
          1: 'Find matching pairs of emojis',
          2: 'Match all pairs in the shortest time to win!'
        },
        selectDifficulty: 'Select Difficulty',
        easy: 'Easy',
        normal: 'Normal',
        hard: 'Hard',
        startGame: 'Start Game',
        myBestRecord: 'My Best Record',
        myRecordsTop10: 'My Top 10 Records',
        noRecordsYet: 'No records yet. Start now!',
        none: 'None',
        moves: 'moves',
        complete: 'Complete!',
        yourTime: 'Your Time',
        playAgain: 'Play Again',
        backHome: 'Home',
        otherGames: 'Other Games',
        fpsReactionTest: 'FPS Reaction Test',
        fpsReactionDesc: 'Test your reaction speed',
        typingSpeed: 'Typing Speed',
        typingSpeedDesc: 'Test your typing speed',
        aimTrainer: 'Aim Trainer',
        aimTrainerDesc: 'Improve your aim precision',
        mathChallenge: 'Math Challenge',
        mathChallengeDesc: 'Quick math calculations',
        privacyPolicy: 'Privacy Policy',
        termsOfService: 'Terms of Service'
      },
      ja: {
        title: 'è¨˜æ†¶åŠ›ãƒ†ã‚¹ãƒˆ',
        subtitle: 'æœ€çŸ­æ™‚é–“ã§ã™ã¹ã¦ã®ã‚«ãƒ¼ãƒ‰ã‚’åˆã‚ã›ã‚ˆã†!',
        gameMethod: 'éŠã³æ–¹',
        memoryMethodDesc: {
          0: 'ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦çµµæ–‡å­—ã‚’ç¢ºèª',
          1: 'åŒã˜çµµæ–‡å­—ã®ãƒšã‚¢ã‚’è¦‹ã¤ã‘ã‚‹',
          2: 'æœ€çŸ­æ™‚é–“ã§ã™ã¹ã¦ã®ãƒšã‚¢ã‚’åˆã‚ã›ã¦å‹åˆ©!'
        },
        selectDifficulty: 'é›£æ˜“åº¦é¸æŠ',
        easy: 'ç°¡å˜',
        normal: 'æ™®é€š',
        hard: 'é›£ã—ã„',
        startGame: 'ã‚²ãƒ¼ãƒ é–‹å§‹',
        myBestRecord: 'è‡ªå·±ãƒ™ã‚¹ãƒˆ',
        myRecordsTop10: 'ãƒˆãƒƒãƒ—10è¨˜éŒ²',
        noRecordsYet: 'ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ä»Šã™ãå§‹ã‚ã‚ˆã†!',
        none: 'ãªã—',
        moves: 'æ‰‹',
        complete: 'å®Œäº†!',
        yourTime: 'æ‰€è¦æ™‚é–“',
        playAgain: 'å†æŒ‘æˆ¦',
        backHome: 'ãƒ›ãƒ¼ãƒ ',
        otherGames: 'ä»–ã®ã‚²ãƒ¼ãƒ ',
        fpsReactionTest: 'FPSåå¿œãƒ†ã‚¹ãƒˆ',
        fpsReactionDesc: 'åå¿œé€Ÿåº¦ã‚’ãƒ†ã‚¹ãƒˆ',
        typingSpeed: 'ã‚¿ã‚¤ãƒ”ãƒ³ã‚°é€Ÿåº¦',
        typingSpeedDesc: 'ã‚¿ã‚¤ãƒ”ãƒ³ã‚°é€Ÿåº¦ã‚’ãƒ†ã‚¹ãƒˆ',
        aimTrainer: 'ã‚¨ã‚¤ãƒ ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼',
        aimTrainerDesc: 'ç…§æº–ç²¾åº¦ã‚’å‘ä¸Š',
        mathChallenge: 'æ•°å­¦ãƒãƒ£ãƒ¬ãƒ³ã‚¸',
        mathChallengeDesc: 'ç´ æ—©ã„è¨ˆç®—èƒ½åŠ›',
        privacyPolicy: 'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼',
        termsOfService: 'åˆ©ç”¨è¦ç´„'
      },
      zh: {
        title: 'è®°å¿†åŠ›æµ‹è¯•',
        subtitle: 'åœ¨æœ€çŸ­æ—¶é—´å†…åŒ¹é…æ‰€æœ‰å¡ç‰‡!',
        gameMethod: 'æ¸¸æˆæ–¹æ³•',
        memoryMethodDesc: {
          0: 'ç‚¹å‡»å¡ç‰‡ç¿»è½¬å¹¶æ˜¾ç¤ºè¡¨æƒ…ç¬¦å·',
          1: 'æ‰¾åˆ°åŒ¹é…çš„è¡¨æƒ…ç¬¦å·å¯¹',
          2: 'åœ¨æœ€çŸ­æ—¶é—´å†…åŒ¹é…æ‰€æœ‰å¯¹ä»¥è·èƒœ!'
        },
        selectDifficulty: 'é€‰æ‹©éš¾åº¦',
        easy: 'ç®€å•',
        normal: 'æ™®é€š',
        hard: 'å›°éš¾',
        startGame: 'å¼€å§‹æ¸¸æˆ',
        myBestRecord: 'æˆ‘çš„æœ€ä½³è®°å½•',
        myRecordsTop10: 'æˆ‘çš„å‰10è®°å½•',
        noRecordsYet: 'æš‚æ— è®°å½•ã€‚ç°åœ¨å¼€å§‹!',
        none: 'æ— ',
        moves: 'ç§»åŠ¨',
        complete: 'å®Œæˆ!',
        yourTime: 'ç”¨æ—¶',
        playAgain: 'å†ç©ä¸€æ¬¡',
        backHome: 'ä¸»é¡µ',
        otherGames: 'å…¶ä»–æ¸¸æˆ',
        fpsReactionTest: 'FPSååº”æµ‹è¯•',
        fpsReactionDesc: 'æµ‹è¯•ååº”é€Ÿåº¦',
        typingSpeed: 'æ‰“å­—é€Ÿåº¦',
        typingSpeedDesc: 'æµ‹è¯•æ‰“å­—é€Ÿåº¦',
        aimTrainer: 'ç„å‡†è®­ç»ƒ',
        aimTrainerDesc: 'æé«˜ç„å‡†ç²¾åº¦',
        mathChallenge: 'æ•°å­¦æŒ‘æˆ˜',
        mathChallengeDesc: 'å¿«é€Ÿè®¡ç®—èƒ½åŠ›',
        privacyPolicy: 'éšç§æ”¿ç­–',
        termsOfService: 'æœåŠ¡æ¡æ¬¾'
      },
      es: {
        title: 'Test de Memoria',
        subtitle: 'Â¡Empareja todas las cartas en el menor tiempo!',
        gameMethod: 'CÃ³mo Jugar',
        memoryMethodDesc: {
          0: 'Haz clic en las cartas para voltear y revelar emojis',
          1: 'Encuentra pares de emojis coincidentes',
          2: 'Â¡Empareja todos los pares en el menor tiempo para ganar!'
        },
        selectDifficulty: 'Seleccionar Dificultad',
        easy: 'FÃ¡cil',
        normal: 'Normal',
        hard: 'DifÃ­cil',
        startGame: 'Comenzar Juego',
        myBestRecord: 'Mi Mejor RÃ©cord',
        myRecordsTop10: 'Mis 10 Mejores RÃ©cords',
        noRecordsYet: 'Sin rÃ©cords aÃºn. Â¡Empieza ahora!',
        none: 'Ninguno',
        moves: 'movimientos',
        complete: 'Â¡Completado!',
        yourTime: 'Tu Tiempo',
        playAgain: 'Jugar de Nuevo',
        backHome: 'Inicio',
        otherGames: 'Otros Juegos',
        fpsReactionTest: 'Test de ReacciÃ³n FPS',
        fpsReactionDesc: 'Prueba tu velocidad de reacciÃ³n',
        typingSpeed: 'Velocidad de Escritura',
        typingSpeedDesc: 'Prueba tu velocidad de escritura',
        aimTrainer: 'Entrenador de PunterÃ­a',
        aimTrainerDesc: 'Mejora tu precisiÃ³n',
        mathChallenge: 'DesafÃ­o MatemÃ¡tico',
        mathChallengeDesc: 'CÃ¡lculos rÃ¡pidos',
        privacyPolicy: 'PolÃ­tica de Privacidad',
        termsOfService: 'TÃ©rminos de Servicio'
      },
      fr: {
        title: 'Test de MÃ©moire',
        subtitle: 'Associez toutes les cartes dans le temps le plus court!',
        gameMethod: 'Comment Jouer',
        memoryMethodDesc: {
          0: 'Cliquez sur les cartes pour les retourner et rÃ©vÃ©ler des emojis',
          1: 'Trouvez des paires d\'emojis correspondantes',
          2: 'Associez toutes les paires dans le temps le plus court pour gagner!'
        },
        selectDifficulty: 'SÃ©lectionner la DifficultÃ©',
        easy: 'Facile',
        normal: 'Normal',
        hard: 'Difficile',
        startGame: 'Commencer le Jeu',
        myBestRecord: 'Mon Meilleur Score',
        myRecordsTop10: 'Mes 10 Meilleurs Scores',
        noRecordsYet: 'Pas encore de scores. Commencez maintenant!',
        none: 'Aucun',
        moves: 'coups',
        complete: 'TerminÃ©!',
        yourTime: 'Votre Temps',
        playAgain: 'Rejouer',
        backHome: 'Accueil',
        otherGames: 'Autres Jeux',
        fpsReactionTest: 'Test de RÃ©action FPS',
        fpsReactionDesc: 'Testez votre vitesse de rÃ©action',
        typingSpeed: 'Vitesse de Frappe',
        typingSpeedDesc: 'Testez votre vitesse de frappe',
        aimTrainer: 'EntraÃ®neur de VisÃ©e',
        aimTrainerDesc: 'AmÃ©liorez votre prÃ©cision',
        mathChallenge: 'DÃ©fi MathÃ©matique',
        mathChallengeDesc: 'Calculs rapides',
        privacyPolicy: 'Politique de ConfidentialitÃ©',
        termsOfService: 'Conditions d\'Utilisation'
      },
      de: {
        title: 'GedÃ¤chtnistest',
        subtitle: 'Finde alle Kartenpaare in kÃ¼rzester Zeit!',
        gameMethod: 'Spielanleitung',
        memoryMethodDesc: {
          0: 'Klicke auf Karten um sie umzudrehen und Emojis zu enthÃ¼llen',
          1: 'Finde passende Emoji-Paare',
          2: 'Finde alle Paare in kÃ¼rzester Zeit um zu gewinnen!'
        },
        selectDifficulty: 'Schwierigkeit WÃ¤hlen',
        easy: 'Einfach',
        normal: 'Normal',
        hard: 'Schwer',
        startGame: 'Spiel Starten',
        myBestRecord: 'Mein Bester Rekord',
        myRecordsTop10: 'Meine Top 10 Rekorde',
        noRecordsYet: 'Noch keine Rekorde. Jetzt starten!',
        none: 'Keine',
        moves: 'ZÃ¼ge',
        complete: 'Abgeschlossen!',
        yourTime: 'Deine Zeit',
        playAgain: 'Nochmal Spielen',
        backHome: 'Startseite',
        otherGames: 'Andere Spiele',
        fpsReactionTest: 'FPS Reaktionstest',
        fpsReactionDesc: 'Teste deine Reaktionsgeschwindigkeit',
        typingSpeed: 'Tippgeschwindigkeit',
        typingSpeedDesc: 'Teste deine Tippgeschwindigkeit',
        aimTrainer: 'Zieltrainer',
        aimTrainerDesc: 'Verbessere deine Zielgenauigkeit',
        mathChallenge: 'Mathe-Herausforderung',
        mathChallengeDesc: 'Schnelle Berechnungen',
        privacyPolicy: 'Datenschutzrichtlinie',
        termsOfService: 'Nutzungsbedingungen'
      },
      pt: {
        title: 'Teste de MemÃ³ria',
        subtitle: 'Combine todas as cartas no menor tempo!',
        gameMethod: 'Como Jogar',
        memoryMethodDesc: {
          0: 'Clique nas cartas para virar e revelar emojis',
          1: 'Encontre pares de emojis correspondentes',
          2: 'Combine todos os pares no menor tempo para vencer!'
        },
        selectDifficulty: 'Selecionar Dificuldade',
        easy: 'FÃ¡cil',
        normal: 'Normal',
        hard: 'DifÃ­cil',
        startGame: 'Iniciar Jogo',
        myBestRecord: 'Meu Melhor Recorde',
        myRecordsTop10: 'Meus 10 Melhores Recordes',
        noRecordsYet: 'Sem recordes ainda. Comece agora!',
        none: 'Nenhum',
        moves: 'movimentos',
        complete: 'Completo!',
        yourTime: 'Seu Tempo',
        playAgain: 'Jogar Novamente',
        backHome: 'InÃ­cio',
        otherGames: 'Outros Jogos',
        fpsReactionTest: 'Teste de ReaÃ§Ã£o FPS',
        fpsReactionDesc: 'Teste sua velocidade de reaÃ§Ã£o',
        typingSpeed: 'Velocidade de DigitaÃ§Ã£o',
        typingSpeedDesc: 'Teste sua velocidade de digitaÃ§Ã£o',
        aimTrainer: 'Treinador de Mira',
        aimTrainerDesc: 'Melhore sua precisÃ£o',
        mathChallenge: 'Desafio MatemÃ¡tico',
        mathChallengeDesc: 'CÃ¡lculos rÃ¡pidos',
        privacyPolicy: 'PolÃ­tica de Privacidade',
        termsOfService: 'Termos de ServiÃ§o'
      },
      ru: {
        title: 'Ğ¢ĞµÑÑ‚ ĞŸĞ°Ğ¼ÑÑ‚Ğ¸',
        subtitle: 'ĞĞ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ Ğ²ÑĞµ Ğ¿Ğ°Ñ€Ñ‹ ĞºĞ°Ñ€Ñ‚ Ğ·Ğ° ĞºÑ€Ğ°Ñ‚Ñ‡Ğ°Ğ¹ÑˆĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ!',
        gameMethod: 'ĞšĞ°Ğº Ğ˜Ğ³Ñ€Ğ°Ñ‚ÑŒ',
        memoryMethodDesc: {
          0: 'ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ½Ğ° ĞºĞ°Ñ€Ñ‚Ñ‹ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿ĞµÑ€ĞµĞ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ Ğ¸ ÑƒĞ²Ğ¸Ğ´ĞµÑ‚ÑŒ ÑĞ¼Ğ¾Ğ´Ğ·Ğ¸',
          1: 'ĞĞ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´Ğ°ÑÑ‰Ğ¸Ğµ Ğ¿Ğ°Ñ€Ñ‹ ÑĞ¼Ğ¾Ğ´Ğ·Ğ¸',
          2: 'ĞĞ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ Ğ²ÑĞµ Ğ¿Ğ°Ñ€Ñ‹ Ğ·Ğ° ĞºÑ€Ğ°Ñ‚Ñ‡Ğ°Ğ¹ÑˆĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸Ñ‚ÑŒ!'
        },
        selectDifficulty: 'Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ',
        easy: 'Ğ›ĞµĞ³ĞºĞ¸Ğ¹',
        normal: 'ĞĞ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹',
        hard: 'Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ñ‹Ğ¹',
        startGame: 'ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ˜Ğ³Ñ€Ñƒ',
        myBestRecord: 'ĞœĞ¾Ğ¹ Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚',
        myRecordsTop10: 'ĞœĞ¾Ğ¸ 10 Ğ›ÑƒÑ‡ÑˆĞ¸Ñ… Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²',
        noRecordsYet: 'ĞŸĞ¾ĞºĞ° Ğ½ĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ². ĞĞ°Ñ‡Ğ½Ğ¸Ñ‚Ğµ ÑĞµĞ¹Ñ‡Ğ°Ñ!',
        none: 'ĞĞµÑ‚',
        moves: 'Ñ…Ğ¾Ğ´Ğ¾Ğ²',
        complete: 'Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾!',
        yourTime: 'Ğ’Ğ°ÑˆĞµ Ğ’Ñ€ĞµĞ¼Ñ',
        playAgain: 'Ğ˜Ğ³Ñ€Ğ°Ñ‚ÑŒ Ğ¡Ğ½Ğ¾Ğ²Ğ°',
        backHome: 'Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ',
        otherGames: 'Ğ”Ñ€ÑƒĞ³Ğ¸Ğµ Ğ˜Ğ³Ñ€Ñ‹',
        fpsReactionTest: 'Ğ¢ĞµÑÑ‚ Ğ ĞµĞ°ĞºÑ†Ğ¸Ğ¸ FPS',
        fpsReactionDesc: 'ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ Ñ€ĞµĞ°ĞºÑ†Ğ¸Ğ¸',
        typingSpeed: 'Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ ĞŸĞµÑ‡Ğ°Ñ‚Ğ¸',
        typingSpeedDesc: 'ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ¸',
        aimTrainer: 'Ğ¢Ñ€ĞµĞ½Ğ°Ğ¶ĞµÑ€ ĞŸÑ€Ğ¸Ñ†ĞµĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ',
        aimTrainerDesc: 'Ğ£Ğ»ÑƒÑ‡ÑˆĞ¸Ñ‚Ğµ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ',
        mathChallenge: 'ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ’Ñ‹Ğ·Ğ¾Ğ²',
        mathChallengeDesc: 'Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ',
        privacyPolicy: 'ĞŸĞ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° ĞšĞ¾Ğ½Ñ„Ğ¸Ğ´ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸',
        termsOfService: 'Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ'
      },
      ar: {
        title: 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø°Ø§ÙƒØ±Ø©',
        subtitle: 'Ù‚Ù… Ø¨Ù…Ø·Ø§Ø¨Ù‚Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ÙÙŠ Ø£Ù‚ØµØ± ÙˆÙ‚Øª!',
        gameMethod: 'ÙƒÙŠÙÙŠØ© Ø§Ù„Ù„Ø¹Ø¨',
        memoryMethodDesc: {
          0: 'Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ù„Ù‚Ù„Ø¨Ù‡Ø§ ÙˆÙƒØ´Ù Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„ØªØ¹Ø¨ÙŠØ±ÙŠØ©',
          1: 'Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£Ø²ÙˆØ§Ø¬ Ù…ØªØ·Ø§Ø¨Ù‚Ø© Ù…Ù† Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„ØªØ¹Ø¨ÙŠØ±ÙŠØ©',
          2: 'Ù‚Ù… Ø¨Ù…Ø·Ø§Ø¨Ù‚Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²ÙˆØ§Ø¬ ÙÙŠ Ø£Ù‚ØµØ± ÙˆÙ‚Øª Ù„Ù„ÙÙˆØ²!'
        },
        selectDifficulty: 'Ø§Ø®ØªØ± Ø§Ù„ØµØ¹ÙˆØ¨Ø©',
        easy: 'Ø³Ù‡Ù„',
        normal: 'Ø¹Ø§Ø¯ÙŠ',
        hard: 'ØµØ¹Ø¨',
        startGame: 'Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©',
        myBestRecord: 'Ø£ÙØ¶Ù„ Ø±Ù‚Ù… Ù‚ÙŠØ§Ø³ÙŠ',
        myRecordsTop10: 'Ø£ÙØ¶Ù„ 10 Ø³Ø¬Ù„Ø§Øª',
        noRecordsYet: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª Ø¨Ø¹Ø¯. Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†!',
        none: 'Ù„Ø§ Ø´ÙŠØ¡',
        moves: 'Ø­Ø±ÙƒØ§Øª',
        complete: 'Ù…ÙƒØªÙ…Ù„!',
        yourTime: 'ÙˆÙ‚ØªÙƒ',
        playAgain: 'Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰',
        backHome: 'Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
        otherGames: 'Ø£Ù„Ø¹Ø§Ø¨ Ø£Ø®Ø±Ù‰',
        fpsReactionTest: 'Ø§Ø®ØªØ¨Ø§Ø± Ø±Ø¯ Ø§Ù„ÙØ¹Ù„ FPS',
        fpsReactionDesc: 'Ø§Ø®ØªØ¨Ø± Ø³Ø±Ø¹Ø© Ø±Ø¯ ÙØ¹Ù„Ùƒ',
        typingSpeed: 'Ø³Ø±Ø¹Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø©',
        typingSpeedDesc: 'Ø§Ø®ØªØ¨Ø± Ø³Ø±Ø¹Ø© ÙƒØªØ§Ø¨ØªÙƒ',
        aimTrainer: 'Ù…Ø¯Ø±Ø¨ Ø§Ù„ØªØµÙˆÙŠØ¨',
        aimTrainerDesc: 'Ø­Ø³Ù‘Ù† Ø¯Ù‚Ø© Ø§Ù„ØªØµÙˆÙŠØ¨',
        mathChallenge: 'ØªØ­Ø¯ÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª',
        mathChallengeDesc: 'Ø­Ø³Ø§Ø¨Ø§Øª Ø³Ø±ÙŠØ¹Ø©',
        privacyPolicy: 'Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©',
        termsOfService: 'Ø´Ø±ÙˆØ· Ø§Ù„Ø®Ø¯Ù…Ø©'
      }
    };

    let currentLang = localStorage.getItem('preferredLanguage') || 'en';
    const languageSelector = document.getElementById('language-selector');
    languageSelector.value = currentLang;

    function t(key) {
      const keys = key.split('.');
      let value = translations[currentLang];
      for (const k of keys) {
        value = value?.[k];
      }
      return value || key;
    }

    function updateLanguage() {
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        el.textContent = t(key);
      });
    }

    languageSelector.addEventListener('change', (e) => {
      currentLang = e.target.value;
      localStorage.setItem('preferredLanguage', currentLang);
      updateLanguage();
    });

    updateLanguage();

    // ê²Œì„ ë¡œì§
    let difficulty = 'normal';
    let cards = [];
    let flippedCards = [];
    let matchedPairs = 0;
    let moves = 0;
    let startTime = 0;
    let timerInterval = null;

    // ì´ëª¨ì§€ í’€ (ë§¤ë²ˆ ëœë¤)
    const emojiPool = ['ğŸ', 'ğŸŒ', 'ğŸ‡', 'ğŸŠ', 'ğŸ“', 'ğŸ’', 'ğŸ‘', 'ğŸ¥', 'ğŸ¥‘', 'ğŸ', 'ğŸ¥¥', 'ğŸ‰', 'ğŸˆ', 'ğŸ‹', 'ğŸ¥­', 'ğŸ«', 'ğŸ', 'ğŸ', 'ğŸ¥•', 'ğŸŒ½', 'ğŸ¥¦', 'ğŸ¥’', 'ğŸŒ¶ï¸', 'ğŸ«‘', 'ğŸ¥¬', 'ğŸ§„', 'ğŸ§…', 'ğŸ„', 'ğŸ¥œ', 'ğŸŒ°'];

    const difficultySettings = {
      easy: { pairs: 8, cols: 4 },
      normal: { pairs: 16, cols: 4 },
      hard: { pairs: 32, cols: 8 }
    };

    // ë‚œì´ë„ ì„ íƒ
    document.querySelectorAll('.difficulty-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.difficulty-btn').forEach(b => {
          b.classList.remove('active', 'border-blue-500', 'bg-gradient-to-br', 'from-blue-500', 'to-purple-600', 'text-white', 'shadow-lg');
          b.classList.add('border-gray-300');
        });
        btn.classList.remove('border-gray-300');
        btn.classList.add('active', 'border-blue-500', 'bg-gradient-to-br', 'from-blue-500', 'to-purple-600', 'text-white', 'shadow-lg');
        difficulty = btn.dataset.difficulty;
      });
    });

    document.getElementById('start-btn').addEventListener('click', startGame);
    document.getElementById('retry-btn').addEventListener('click', () => {
      hideScreen(document.getElementById('result-screen'));
      showScreen(document.getElementById('start-screen'));
    });
    document.getElementById('home-btn').addEventListener('click', () => {
      window.location.href = 'index.html';
    });

    function startGame() {
      hideScreen(document.getElementById('start-screen'));
      showScreen(document.getElementById('game-screen'));

      initGame();
    }

    function initGame() {
      const settings = difficultySettings[difficulty];
      cards = [];
      flippedCards = [];
      matchedPairs = 0;
      moves = 0;
      startTime = Date.now();

      // ëœë¤ ì´ëª¨ì§€ ì„ íƒ
      const shuffledEmojis = [...emojiPool].sort(() => Math.random() - 0.5);
      const selectedEmojis = shuffledEmojis.slice(0, settings.pairs);

      // ì¹´ë“œ ìƒì„± (ê° ì´ëª¨ì§€ 2ê°œì”©)
      const cardValues = [...selectedEmojis, ...selectedEmojis];
      cardValues.sort(() => Math.random() - 0.5);

      cards = cardValues.map((emoji, index) => ({
        id: index,
        emoji: emoji,
        flipped: false,
        matched: false
      }));

      renderCards();
      startTimer();
      updateMoves();
    }

    function renderCards() {
      const settings = difficultySettings[difficulty];
      const grid = document.getElementById('card-grid');
      grid.innerHTML = '';
      grid.className = `grid gap-6 mb-4 max-w-4xl mx-auto`;
      grid.style.gridTemplateColumns = `repeat(${settings.cols}, minmax(100px, 1fr))`;

      cards.forEach(card => {
        const cardEl = document.createElement('div');
        cardEl.className = 'card cursor-pointer aspect-square min-w-[100px] min-h-[100px]';
        cardEl.innerHTML = `
          <div class="card-inner w-full h-full">
            <div class="card-front bg-gradient-to-br from-blue-500 to-purple-600 shadow-lg rounded-2xl">
              <div class="text-6xl md:text-7xl">ğŸ´</div>
            </div>
            <div class="card-back bg-white shadow-lg rounded-2xl border-4 border-blue-400">
              <div class="text-6xl md:text-7xl">${card.emoji}</div>
            </div>
          </div>
        `;

        cardEl.addEventListener('click', () => flipCard(card, cardEl));
        grid.appendChild(cardEl);
      });
    }

    function flipCard(card, cardEl) {
      if (card.flipped || card.matched || flippedCards.length >= 2) return;

      card.flipped = true;
      cardEl.classList.add('flipped');
      flippedCards.push({ card, cardEl });

      if (flippedCards.length === 2) {
        moves++;
        updateMoves();
        checkMatch();
      }
    }

    function checkMatch() {
      const [first, second] = flippedCards;

      if (first.card.emoji === second.card.emoji) {
        // ë§¤ì¹˜!
        first.card.matched = true;
        second.card.matched = true;
        matchedPairs++;
        flippedCards = [];

        if (matchedPairs === difficultySettings[difficulty].pairs) {
          setTimeout(endGame, 500);
        }
      } else {
        // ë¶ˆì¼ì¹˜
        setTimeout(() => {
          first.card.flipped = false;
          second.card.flipped = false;
          first.cardEl.classList.remove('flipped');
          second.cardEl.classList.remove('flipped');
          flippedCards = [];
        }, 1000);
      }
    }

    function startTimer() {
      timerInterval = setInterval(() => {
        const elapsed = Math.floor((Date.now() - startTime) / 1000);
        const minutes = Math.floor(elapsed / 60);
        const seconds = elapsed % 60;
        document.getElementById('time-display').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
      }, 1000);
    }

    function stopTimer() {
      if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
      }
    }

    function updateMoves() {
      document.getElementById('moves-display').textContent = moves;
    }

    function endGame() {
      stopTimer();
      const elapsed = Math.floor((Date.now() - startTime) / 1000);
      const minutes = Math.floor(elapsed / 60);
      const seconds = elapsed % 60;
      const timeStr = `${minutes}:${seconds.toString().padStart(2, '0')}`;

      document.getElementById('final-time').textContent = timeStr;
      document.getElementById('final-moves').textContent = `${moves} ${t('moves')}`;

      // ìµœê³  ê¸°ë¡ ì €ì¥
      const key = `memoryBest_${difficulty}`;
      const best = localStorage.getItem(key);
      if (!best || elapsed < parseInt(best)) {
        localStorage.setItem(key, elapsed);
      }

      hideScreen(document.getElementById('game-screen'));
      showScreen(document.getElementById('result-screen'));
    }

    function showScreen(screen) {
      screen.classList.remove('hidden');
      screen.classList.add('active');
    }

    function hideScreen(screen) {
      screen.classList.add('hidden');
      screen.classList.remove('active');
    }

    // ìµœê³  ê¸°ë¡ ë¡œë“œ
    function loadBestRecord() {
      const key = `memoryBest_${difficulty}`;
      const best = localStorage.getItem(key);
      if (best) {
        const minutes = Math.floor(best / 60);
        const seconds = best % 60;
        document.getElementById('best-record').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
      } else {
        document.getElementById('best-record').textContent = '--';
      }
    }

    loadBestRecord();
  </script>
</body>
</html>
