<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Free Typing Speed Test! Measure your typing speed (WPM) and accuracy. Random texts every time!">
  <title>Typing Speed Test - Measure Your Typing Speed | WPM Test</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#667eea',
            secondary: '#764ba2',
          }
        }
      }
    }
  </script>

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1247545232353663"
     crossorigin="anonymous"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-green-500 to-teal-600">

  <!-- Ïñ∏Ïñ¥ ÏÑ†ÌÉù -->
  <div class="fixed top-4 right-4 z-50">
    <select id="language-selector" class="px-4 py-2 rounded-lg bg-white shadow-lg cursor-pointer">
      <option value="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥</option>
      <option value="en">üá∫üá∏ English</option>
    </select>
  </div>

  <!-- ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞ -->
  <div class="fixed top-4 left-4 z-50">
    <a href="index.html" class="px-4 py-2 bg-white rounded-lg shadow-lg hover:shadow-xl transition-all text-gray-700 font-bold">
      ‚Üê <span data-i18n="backHome">Home</span>
    </a>
  </div>

  <!-- ÏãúÏûë ÌôîÎ©¥ -->
  <div id="start-screen" class="screen active min-h-screen flex flex-col items-center justify-center p-4">
    <!-- ÏÉÅÎã® Í¥ëÍ≥† -->
    <div class="mb-6 flex justify-center">
      <ins class="adsbygoogle block"
           style="display:block; max-height:90px;"
           data-ad-format="horizontal"
           data-ad-client="ca-pub-1247545232353663"
           data-full-width-responsive="true"></ins>
    </div>

    <div class="max-w-2xl w-full bg-white rounded-3xl shadow-2xl p-6 md:p-10">
      <h1 class="text-4xl md:text-5xl font-bold text-center text-green-600 mb-4">
        ‚ö° <span data-i18n="title">Typing Speed Test</span>
      </h1>
      <p class="text-center text-gray-600 mb-8" data-i18n="subtitle">Test your typing speed and accuracy!</p>

      <!-- ÏãúÍ∞Ñ ÏÑ†ÌÉù -->
      <div class="mb-8">
        <h3 class="text-xl font-bold text-center mb-4" data-i18n="selectDuration">Select Duration</h3>
        <div class="grid grid-cols-3 gap-4">
          <button class="duration-btn border-2 border-gray-300 rounded-xl p-4 hover:border-green-500 hover:shadow-lg transition-all" data-duration="30">
            <div class="font-bold text-2xl">30</div>
            <div class="text-sm text-gray-500" data-i18n="seconds">seconds</div>
          </button>
          <button class="duration-btn active border-2 border-green-500 bg-gradient-to-br from-green-500 to-teal-600 text-white rounded-xl p-4 shadow-lg" data-duration="60">
            <div class="font-bold text-2xl">60</div>
            <div class="text-sm opacity-90" data-i18n="seconds">seconds</div>
          </button>
          <button class="duration-btn border-2 border-gray-300 rounded-xl p-4 hover:border-green-500 hover:shadow-lg transition-all" data-duration="120">
            <div class="font-bold text-2xl">120</div>
            <div class="text-sm text-gray-500" data-i18n="seconds">seconds</div>
          </button>
        </div>
      </div>

      <button id="start-btn" class="w-full bg-gradient-to-r from-green-500 to-teal-600 text-white font-bold text-xl py-4 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all">
        <span data-i18n="startTest">Start Test</span>
      </button>

      <div class="mt-6 text-center text-gray-600">
        <p>üèÜ <span data-i18n="bestRecord">Best Record</span>: <span id="best-record">-- WPM</span></p>
      </div>
    </div>
  </div>

  <!-- Í≤åÏûÑ ÌôîÎ©¥ -->
  <div id="game-screen" class="screen hidden min-h-screen flex flex-col items-center justify-center p-4">
    <div class="max-w-3xl w-full bg-white rounded-3xl shadow-2xl p-6 md:p-10">
      <!-- ÌÉÄÏù¥Î®∏ -->
      <div class="text-center mb-6">
        <div class="text-5xl font-bold text-green-600" id="timer-display">60</div>
        <div class="text-gray-500" data-i18n="secondsLeft">seconds left</div>
      </div>

      <!-- ÌÖçÏä§Ìä∏ ÌëúÏãú -->
      <div id="text-display" class="text-2xl leading-relaxed mb-6 p-6 bg-gray-50 rounded-2xl min-h-[200px] font-mono">
        <!-- ÌÖçÏä§Ìä∏Í∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
      </div>

      <!-- ÏûÖÎ†• ÌïÑÎìú -->
      <input type="text" id="typing-input" class="w-full text-2xl p-4 border-4 border-green-500 rounded-xl focus:outline-none focus:border-teal-600 font-mono" placeholder="Start typing..." autocomplete="off" disabled>

      <!-- ÌÜµÍ≥Ñ -->
      <div class="grid grid-cols-2 gap-4 mt-6">
        <div class="bg-green-50 rounded-xl p-4 text-center">
          <div class="text-gray-600 text-sm" data-i18n="wpm">WPM</div>
          <div id="wpm-display" class="text-3xl font-bold text-green-600">0</div>
        </div>
        <div class="bg-teal-50 rounded-xl p-4 text-center">
          <div class="text-gray-600 text-sm" data-i18n="accuracy">Accuracy</div>
          <div id="accuracy-display" class="text-3xl font-bold text-teal-600">100%</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Í≤∞Í≥º ÌôîÎ©¥ -->
  <div id="result-screen" class="screen hidden min-h-screen flex flex-col items-center justify-center p-4">
    <div class="max-w-2xl w-full bg-white rounded-3xl shadow-2xl p-6 md:p-10">
      <h1 class="text-4xl font-bold text-center text-green-600 mb-8">
        üéâ <span data-i18n="complete">Complete!</span>
      </h1>

      <div class="bg-gradient-to-br from-green-500 to-teal-600 text-white rounded-2xl p-8 mb-6">
        <div class="text-center mb-6">
          <div class="text-lg opacity-90 mb-2" data-i18n="yourSpeed">Your Typing Speed</div>
          <div id="final-wpm" class="text-6xl font-bold">0</div>
          <div class="text-2xl mt-2">WPM</div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div class="bg-white/20 rounded-xl p-4 text-center">
            <div class="text-sm opacity-90" data-i18n="accuracy">Accuracy</div>
            <div id="final-accuracy" class="text-2xl font-bold">100%</div>
          </div>
          <div class="bg-white/20 rounded-xl p-4 text-center">
            <div class="text-sm opacity-90" data-i18n="cpm">CPM</div>
            <div id="final-cpm" class="text-2xl font-bold">0</div>
          </div>
        </div>
      </div>

      <div class="flex gap-4">
        <button id="retry-btn" class="flex-1 bg-gradient-to-r from-green-500 to-teal-600 text-white font-bold text-xl py-4 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all">
          <span data-i18n="tryAgain">Try Again</span>
        </button>
        <button id="home-btn" class="flex-1 bg-white text-green-600 border-2 border-green-600 font-bold text-xl py-4 rounded-full hover:bg-green-600 hover:text-white transition-all">
          <span data-i18n="backHome">Home</span>
        </button>
      </div>
    </div>

    <!-- ÌïòÎã® Í¥ëÍ≥† -->
    <div class="mt-6 flex justify-center">
      <ins class="adsbygoogle block"
           style="display:block; min-height:250px;"
           data-ad-format="autorelaxed"
           data-ad-client="ca-pub-1247545232353663"
           data-full-width-responsive="true"></ins>
    </div>
  </div>

  <!-- Footer -->
  <footer class="w-full py-6 text-center text-white bg-gray-900">
    <p class="mb-2">Made with ‚ù§Ô∏è | Typing Speed Test</p>
    <p class="text-sm">
      <a href="privacy.html" class="text-white hover:underline mx-2" data-i18n="privacyPolicy">Privacy Policy</a> |
      <a href="terms.html" class="text-white hover:underline mx-2" data-i18n="termsOfService">Terms of Service</a>
    </p>
  </footer>

  <!-- AdSense Ï¥àÍ∏∞Ìôî -->
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>

  <script>
    // Î≤àÏó≠
    const translations = {
      ko: {
        title: 'ÌÉÄÏù¥Ìïë ÏÜçÎèÑ ÌÖåÏä§Ìä∏',
        subtitle: 'ÌÉÄÏù¥Ìïë ÏÜçÎèÑÏôÄ Ï†ïÌôïÎèÑÎ•º Ï∏°Ï†ïÌïòÏÑ∏Ïöî!',
        selectDuration: 'ÏãúÍ∞Ñ ÏÑ†ÌÉù',
        seconds: 'Ï¥à',
        startTest: 'ÌÖåÏä§Ìä∏ ÏãúÏûë',
        bestRecord: 'ÏµúÍ≥† Í∏∞Î°ù',
        secondsLeft: 'Ï¥à ÎÇ®Ïùå',
        wpm: 'Î∂ÑÎãπ ÌÉÄÏàò',
        accuracy: 'Ï†ïÌôïÎèÑ',
        complete: 'ÏôÑÎ£å!',
        yourSpeed: 'ÌÉÄÏù¥Ìïë ÏÜçÎèÑ',
        cpm: 'Î∂ÑÎãπ Í∏ÄÏûêÏàò',
        tryAgain: 'Îã§Ïãú ÌïòÍ∏∞',
        backHome: 'ÌôàÏúºÎ°ú',
        privacyPolicy: 'Í∞úÏù∏Ï†ïÎ≥¥Ï≤òÎ¶¨Î∞©Ïπ®',
        termsOfService: 'Ïù¥Ïö©ÏïΩÍ¥Ä'
      },
      en: {
        title: 'Typing Speed Test',
        subtitle: 'Test your typing speed and accuracy!',
        selectDuration: 'Select Duration',
        seconds: 'seconds',
        startTest: 'Start Test',
        bestRecord: 'Best Record',
        secondsLeft: 'seconds left',
        wpm: 'WPM',
        accuracy: 'Accuracy',
        complete: 'Complete!',
        yourSpeed: 'Your Typing Speed',
        cpm: 'CPM',
        tryAgain: 'Try Again',
        backHome: 'Home',
        privacyPolicy: 'Privacy Policy',
        termsOfService: 'Terms of Service'
      }
    };

    // ÎûúÎç§ ÌÖçÏä§Ìä∏ (Ïñ∏Ïñ¥Î≥Ñ)
    const textPool = {
      ko: [
        'Îπ†Î•∏ Í∞àÏÉâ Ïó¨Ïö∞Í∞Ä Í≤åÏúºÎ•∏ Í∞úÎ•º Îõ∞Ïñ¥ÎÑòÏäµÎãàÎã§. Ïó∞ÏäµÏùÄ ÏôÑÎ≤ΩÏùÑ ÎßåÎì≠ÎãàÎã§. Íæ∏Ï§ÄÌï®Ïù¥ Ï§ëÏöîÌï©ÎãàÎã§.',
        'ÌîÑÎ°úÍ∑∏ÎûòÎ∞çÏùÄ Î¨∏Ï†úÎ•º Ìï¥Í≤∞ÌïòÎäî ÏòàÏà†ÏûÖÎãàÎã§. ÏΩîÎìúÎäî ÏÉùÍ∞ÅÏùÑ ÌëúÌòÑÌïòÎäî Ïñ∏Ïñ¥ÏûÖÎãàÎã§.',
        'Ïù∏ÏÉùÏùÄ ÏûêÏ†ÑÍ±∞Î•º ÌÉÄÎäî Í≤ÉÍ≥º Í∞ôÏäµÎãàÎã§. Í∑†ÌòïÏùÑ Ïú†ÏßÄÌïòÎ†§Î©¥ Í≥ÑÏÜç ÏõÄÏßÅÏó¨Ïïº Ìï©ÎãàÎã§.',
        'ÏÑ±Í≥µÏùò ÎπÑÍ≤∞ÏùÄ ÏãúÏûëÌïòÎäî Í≤ÉÏûÖÎãàÎã§. ÏôÑÎ≤ΩÌï† ÎïåÍπåÏßÄ Í∏∞Îã§Î¶¨ÏßÄ ÎßàÏÑ∏Ïöî.',
        'Ïò§ÎäòÏùò ÎÇòÎäî Ïñ¥Ï†úÏùò ÎÇòÎ≥¥Îã§ ÎÇòÏïÑÏ†∏Ïïº Ìï©ÎãàÎã§. ÏûëÏùÄ ÏßÑÎ≥¥ÎùºÎèÑ ÏßÑÎ≥¥ÏûÖÎãàÎã§.',
        'ÎèÖÏÑúÎäî ÎßàÏùåÏùò ÏñëÏãùÏûÖÎãàÎã§. Ï±ÖÏùÄ Ïö∞Î¶¨Î•º ÏÉàÎ°úÏö¥ ÏÑ∏Í≥ÑÎ°ú ÏïàÎÇ¥Ìï©ÎãàÎã§.',
        'ÏùåÏïÖÏùÄ ÏòÅÌòºÏùò Ïñ∏Ïñ¥ÏûÖÎãàÎã§. ÏùåÏïÖÏùÑ ÌÜµÌï¥ Ïö∞Î¶¨Îäî ÌïòÎÇòÍ∞Ä Îê©ÎãàÎã§.',
        'Ïó¨ÌñâÏùÄ ÏÉàÎ°úÏö¥ Í≤ΩÌóòÏùÑ ÏåìÎäî ÏµúÍ≥†Ïùò Î∞©Î≤ïÏûÖÎãàÎã§. ÏÑ∏ÏÉÅÏùÄ ÎÑìÍ≥† ÏïÑÎ¶ÑÎãµÏäµÎãàÎã§.'
      ],
      en: [
        'The quick brown fox jumps over the lazy dog. Practice makes perfect. Consistency is key to improvement.',
        'Programming is the art of solving problems. Code is the language of thoughts and ideas.',
        'Life is like riding a bicycle. To keep your balance you must keep moving forward.',
        'The secret of getting ahead is getting started. Do not wait until everything is perfect.',
        'Be better today than you were yesterday. Small progress is still progress and matters.',
        'Reading is food for the mind. Books transport us to new worlds and perspectives.',
        'Music is the language of the soul. Through music we connect and become one.',
        'Travel is the best way to gain new experiences. The world is vast and beautiful.'
      ]
    };

    let currentLang = localStorage.getItem('preferredLanguage') || 'en';
    const languageSelector = document.getElementById('language-selector');
    languageSelector.value = currentLang;

    function t(key) {
      return translations[currentLang][key] || key;
    }

    function updateLanguage() {
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        el.textContent = t(key);
      });
    }

    languageSelector.addEventListener('change', (e) => {
      currentLang = e.target.value;
      localStorage.setItem('preferredLanguage', currentLang);
      updateLanguage();
    });

    updateLanguage();

    // Í≤åÏûÑ Î≥ÄÏàò
    let duration = 60;
    let timeLeft = 60;
    let timerInterval = null;
    let targetText = '';
    let typedText = '';
    let correctChars = 0;
    let totalChars = 0;
    let startTime = 0;

    // Î≤ÑÌäº Ïù¥Î≤§Ìä∏
    document.querySelectorAll('.duration-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.duration-btn').forEach(b => {
          b.classList.remove('active', 'border-green-500', 'bg-gradient-to-br', 'from-green-500', 'to-teal-600', 'text-white', 'shadow-lg');
          b.classList.add('border-gray-300');
        });
        btn.classList.remove('border-gray-300');
        btn.classList.add('active', 'border-green-500', 'bg-gradient-to-br', 'from-green-500', 'to-teal-600', 'text-white', 'shadow-lg');
        duration = parseInt(btn.dataset.duration);
      });
    });

    document.getElementById('start-btn').addEventListener('click', startGame);
    document.getElementById('retry-btn').addEventListener('click', () => {
      hideScreen(document.getElementById('result-screen'));
      showScreen(document.getElementById('start-screen'));
    });
    document.getElementById('home-btn').addEventListener('click', () => {
      window.location.href = 'index.html';
    });

    function startGame() {
      hideScreen(document.getElementById('start-screen'));
      showScreen(document.getElementById('game-screen'));

      initGame();
    }

    function initGame() {
      // ÎûúÎç§ ÌÖçÏä§Ìä∏ ÏÑ†ÌÉù
      const texts = textPool[currentLang];
      targetText = texts[Math.floor(Math.random() * texts.length)];

      timeLeft = duration;
      typedText = '';
      correctChars = 0;
      totalChars = 0;

      // ÌÖçÏä§Ìä∏ ÌëúÏãú
      renderText();

      // ÌÉÄÏù¥Î®∏ ÏãúÏûë
      document.getElementById('timer-display').textContent = timeLeft;
      document.getElementById('typing-input').value = '';
      document.getElementById('typing-input').disabled = false;
      document.getElementById('typing-input').focus();

      startTime = Date.now();
      timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById('timer-display').textContent = timeLeft;

        if (timeLeft <= 0) {
          endGame();
        }
      }, 1000);

      // ÏûÖÎ†• Ïù¥Î≤§Ìä∏
      const input = document.getElementById('typing-input');
      input.addEventListener('input', handleTyping);
    }

    function renderText() {
      const display = document.getElementById('text-display');
      display.innerHTML = '';

      for (let i = 0; i < targetText.length; i++) {
        const span = document.createElement('span');
        span.textContent = targetText[i];
        span.className = 'text-gray-400';

        if (i < typedText.length) {
          if (typedText[i] === targetText[i]) {
            span.className = 'text-green-600';
          } else {
            span.className = 'text-red-600 bg-red-100';
          }
        } else if (i === typedText.length) {
          span.className = 'text-gray-800 bg-yellow-200';
        }

        display.appendChild(span);
      }
    }

    function handleTyping(e) {
      typedText = e.target.value;
      totalChars = typedText.length;

      // Ï†ïÌôïÌïú Í∏ÄÏûê Ïàò Í≥ÑÏÇ∞
      correctChars = 0;
      for (let i = 0; i < typedText.length && i < targetText.length; i++) {
        if (typedText[i] === targetText[i]) {
          correctChars++;
        }
      }

      renderText();
      updateStats();

      // ÏôÑÎ£å Ï≤¥ÌÅ¨
      if (typedText === targetText) {
        endGame();
      }
    }

    function updateStats() {
      const elapsed = (Date.now() - startTime) / 1000 / 60; // Î∂Ñ Îã®ÏúÑ
      const wpm = Math.round((correctChars / 5) / elapsed);
      const accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;

      document.getElementById('wpm-display').textContent = wpm;
      document.getElementById('accuracy-display').textContent = accuracy + '%';
    }

    function endGame() {
      clearInterval(timerInterval);
      document.getElementById('typing-input').disabled = true;

      const elapsed = (Date.now() - startTime) / 1000 / 60;
      const wpm = Math.round((correctChars / 5) / elapsed);
      const cpm = Math.round(correctChars / elapsed);
      const accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;

      document.getElementById('final-wpm').textContent = wpm;
      document.getElementById('final-cpm').textContent = cpm;
      document.getElementById('final-accuracy').textContent = accuracy + '%';

      // ÏµúÍ≥† Í∏∞Î°ù Ï†ÄÏû•
      const key = `typingBest_${duration}`;
      const best = localStorage.getItem(key);
      if (!best || wpm > parseInt(best)) {
        localStorage.setItem(key, wpm);
      }

      hideScreen(document.getElementById('game-screen'));
      showScreen(document.getElementById('result-screen'));
    }

    function showScreen(screen) {
      screen.classList.remove('hidden');
      screen.classList.add('active');
    }

    function hideScreen(screen) {
      screen.classList.add('hidden');
      screen.classList.remove('active');
    }

    function loadBestRecord() {
      const key = `typingBest_${duration}`;
      const best = localStorage.getItem(key);
      document.getElementById('best-record').textContent = best ? `${best} WPM` : '-- WPM';
    }

    loadBestRecord();
  </script>
</body>
</html>
